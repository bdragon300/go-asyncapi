configVersion: 1
runtimeModule: github.com/bdragon300/go-asyncapi/run

layout:
  - artifactKinds: ["schema"]
    render:
      file: schemas/{{.Object | goIDUpper }}.go
  - artifactKinds: ["server"]
    render:
      file: servers/{{.Object | goIDUpper }}.go
  - artifactKinds: ["channel"]
    render:
      file: channels/{{.Object | goIDUpper }}.go
  - artifactKinds: ["operation"]
    render:
      file: operations/{{.Object | goIDUpper }}.go
  - artifactKinds: ["message"]
    render:
      file: messages/{{.Object | goIDUpper }}.go
  - artifactKinds: ["parameter"]
    render:
      file: parameters/{{.Object | goIDUpper }}.go

locator:
  timeout: 30s
  searchDirectory: .

code:
  preambleTemplate: preamble.tmpl
  targetDir: ./asyncapi
  implementationsDir: impl/{{ .Manifest.Protocol }}

client:
  outputFile: ./client
  outputSourceFile: client.go
  goModTemplate: go.mod.tmpl

infra:
  format: docker
  outputFile: ./docker-compose.yaml
