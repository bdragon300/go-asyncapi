{{define "operation/kafka/newFunction/block1"}}
    res.topic = res.name.String()
    {{- if .BindingsType}}
        bindings := {{.BindingsType | gousage}}{}.{{.Protocol | capitalize | goid}}()
        if bindings.Topic != "" {
            res.topic = bindings.Topic
        }
    {{- end}}
{{- end}}
{{define "operation/kafka/publishMethods/block1"}}
    envelope.SetTopic(o.topic)
{{- end}}

{{- with deref .}}
    {{template "operation/proto/openFunction" .}}

    {{ .Type | godef }}

    {{if .IsPublisher}}{{template "operation/proto/publishMethods" .}}{{end}}
    {{if .IsSubscriber}}{{template "operation/proto/subscribeMethods" .}}{{end}}
    {{template "operation/proto/serverInterface" .}}
{{- end}}
