{{- /* dot == tmpl.DiagramTemplateContext */ -}}
# This file is generated by go-asyncapi tool

direction: {{$.Config.D2DiagramDirection}}
classes: {
  server: {
  }
  channel: {
    shape: queue
  }
  operation: {
    shape: circle
    width: 50
    height: 50
    label.near: outside-bottom-center
  }
  document: {
    style: {
      stroke-dash: 3
      fill: white
    }
    label.near: outside-top-center
  }
}

{{- range $location, $objGroup := .ObjectsGroupedByLocation}}
    {{- if $.Config.ShowDocumentBorders }}
        {{- $ctx := dict "Config" $.Config "Location" $location}}
        {{template "diagram/document" $ctx }}
    {{- end}}

    {{- range $object := $objGroup}}
        {{- $ctx := dict "Config" $.Config "Object" $object}}
        {{- if and (eq $object.Kind "server") (isVisible $object) $.Config.ShowServers}}
            {{template "diagram/server" $ctx }}

        {{- else if and (eq $object.Kind "channel") (isVisible $object) $.Config.ShowChannels}}
            {{template "diagram/channel" $ctx }}

        {{- else if and (eq $object.Kind "operation") (isVisible $object)}}
            {{template "diagram/operation" $ctx }}

        {{- end}}
    {{- end}}
{{- end}}

{{- /*
    .Location == string;
    .Config == common.ConfigDiagram
    */}}
{{define "diagram/document"}}
{{ goIDLower .Location }}: "ðŸ“„ {{.Location | toQuotable | ellipsisStart 40}}" {
    class: document
}
{{- end}}
