{{- /*
    .Object == render.Channel or render.Operation;
    .Server == render.Server
    .Kind == "channel" or "operation" or "operationReply"
    */}}
{{define "client/channeloperation/mqtt/github.com/eclipse/paho.mqtt.golang/producer/connect"}}
server, err := {{goPkg .Server}}Connect{{.Server | goIDUpper}}Producer(ctx, serverURL, {{if $.Server.SecuritySchemes}}serverSecurity, {{end}}nil)
if err != nil {
    return {{goPkgExt "fmt"}}Errorf("connect server %s: %w", serverURL, err)
}
defer server.Close()
{{- end}}

{{define "client/channeloperation/mqtt/github.com/eclipse/paho.mqtt.golang/consumer/connect"}}
server, err := {{goPkg .Server}}Connect{{.Server | goIDUpper}}Consumer(ctx, serverURL, {{if $.Server.SecuritySchemes}}serverSecurity, {{end}}nil)
if err != nil {
    return {{goPkgExt "fmt"}}Errorf("connect server %s: %w", serverURL, err)
}
defer server.Close()
{{- end}}

{{define "client/channel/mqtt/publish/prepareEnvelope"}}
    envelope.SetTopic(channel.Topic())
{{- end}}

{{define "client/operation/mqtt/publish/prepareEnvelope"}}
    envelope.SetTopic(channel.Topic())
{{- end}}

{{define "client/operationReply/mqtt/publish/prepareEnvelope"}}
    envelope.SetTopic(channel.Topic())
{{- end}}