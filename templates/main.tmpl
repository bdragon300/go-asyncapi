{{if .SelectAsyncAPI}}
    {{template "encoding" .SelectAsyncAPI}}
{{end}}

{{range .Selections.SelectSchemas}}
    {{template "schema" .}}
{{end}}

{{range .Selections.SelectServers}}
    {{template "server" .}}
    {{runTemplate (print .ProtoName "/" "server") .}}
{{end}}

{{range .Selections.SelectParameters}}
    {{template "parameter" .}}
{{end}}

{{$channels := .Selections.SelectChannels}}
{{if $channels}}{{template "channel" $channels.0}}{{end}}

{{range $channels}}
    {{runTemplate (print .ProtoName "/" "channel") .}}
{{end}}

{{$messages := .Selections.SelectMessages}}
{{if $messages}}{{template "message" $messages.0}}{{end}}

{{range $messages}}
    {{runTemplate (print .ProtoName "/" "message") .}}
{{end}}
